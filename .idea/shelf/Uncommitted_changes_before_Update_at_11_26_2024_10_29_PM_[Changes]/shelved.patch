Index: src/main/webapp/WEB-INF/views/login.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><%@page contentType=\"text/html\" pageEncoding=\"UTF-8\"%>\r\n<%@ taglib prefix=\"c\" uri=\"http://java.sun.com/jsp/jstl/core\" %>\r\n<!DOCTYPE html>\r\n<html lang=\"en\">\r\n<head>\r\n    <meta charset=\"UTF-8\">\r\n    <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\r\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n    <link rel=\"shortcut icon\" type=\"image/x-icon\" href=\"assets/img/vapeShop.jpg\">\r\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\r\n    <link href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css\" rel=\"stylesheet\"/>\r\n    <title>Đăng Nhập</title>\r\n    <style>\r\n        body {\r\n            font-family: 'Poppins', sans-serif;\r\n            background: #ffecf2;\r\n        }\r\n\r\n        .box-area {\r\n            width: 930px;\r\n            margin: auto;\r\n        }\r\n\r\n        .right-box {\r\n            padding: 40px 30px 40px 40px;\r\n        }\r\n\r\n        .left-box {\r\n            background: #FF4880;\r\n            color: white;\r\n        }\r\n\r\n        .rounded-4 {\r\n            border-radius: 20px;\r\n        }\r\n\r\n        .rounded-5 {\r\n            border-radius: 30px;\r\n        }\r\n\r\n        @media only screen and (max-width: 768px) {\r\n            .box-area {\r\n                margin: 0 10px;\r\n            }\r\n            .left-box {\r\n                height: 100px;\r\n                overflow: hidden;\r\n            }\r\n            .right-box {\r\n                padding: 20px;\r\n            }\r\n        }\r\n    </style>\r\n</head>\r\n<body>\r\n<%\r\n    String errorMessage = (String) request.getAttribute(\"errorMessage\");\r\n    if (errorMessage != null) {\r\n%>\r\n<div class=\"alert alert-danger\"><%= errorMessage %></div>\r\n<%\r\n    }\r\n%>\r\n<!-- Phần còn lại của mã HTML trong login.jsp -->\r\n\r\n<div class=\"container d-flex justify-content-center align-items-center min-vh-100\">\r\n\r\n    <div class=\"row border rounded-5 p-3 bg-white shadow box-area\">\r\n\r\n        <div class=\"col-md-6 rounded-4 d-flex justify-content-center align-items-center flex-column left-box\">\r\n            <div class=\"featured-image mb-3\">\r\n                <img src=\"img/logobaby.png\" class=\"img-fluid rounded-circle\" style=\"width: 250px;\">\r\n            </div>\r\n            <p class=\"fs-2\" style=\"font-family: 'Courier New', Courier, monospace; font-weight: 600;\">BabyCare Login.</p>\r\n            <small class=\"text-wrap text-center\" style=\"width: 17rem; font-family: 'Courier New', Courier, monospace;\">TRẺ EM LÀ MẦM NON CỦA ĐẤT NƯỚC.</small>\r\n        </div>\r\n\r\n        <div class=\"col-md-6 right-box\">\r\n            <div class=\"row align-items-center\">\r\n                <div class=\"header-text mb-4\">\r\n                    <h2> Xin chào <i class=\"fa fa-heart fa-beat-fade\" style=\"color: #ff0000;\"></i> </h2>\r\n                    <p>Chúng tôi rất vui khi có bạn trở lại.<c:out value=\"${error}\" /></p>\r\n                </div>\r\n\r\n                <form action=\"login\" method=\"post\">\r\n                    <div class=\"input-group mb-3\">\r\n                        <div class=\"input-group-prepend\">\r\n                            <div class=\"input-group-text p-3\"><i class=\"fa fa-user fa-bounce\" style=\"color: #000000;\"></i></div>\r\n                        </div>\r\n                        <input maxlength=\"100\" type=\"text\" name=\"username\" class=\"form-control form-control-lg bg-light fs-6 p-1\" placeholder=\" Địa chỉ email hoặc Người dùng\" value=\"${cookie.username.value}\">\r\n                    </div>\r\n                    <div class=\"input-group mb-1\">\r\n                        <div class=\"input-group-prepend\">\r\n                            <div class=\"input-group-text p-3\"><i class=\"fa fa-key fa-bounce\" style=\"color: #050505;\"></i></div>\r\n                        </div>\r\n                        <input maxlength=\"50\" type=\"password\" name=\"password\" id=\"myInput\" class=\"form-control form-control-lg bg-light fs-6 p-1\" placeholder=\" Mật Khẩu\" value=\"${cookie.password.value}\">\r\n                    </div>\r\n                    <h4 class=\"bg-warning  text-danger \" style=\"text-align: center;background-color: #fa6342;padding: 2px 2px; font-size: 16px;margin:2px 0px \"> ${thongbao}</h4>\r\n\r\n                    <c:if test=\"${not empty userOrEmail}\">\r\n                        <div class=\"alert alert-danger\" style=\"color: red\">${userOrEmail}</div>\r\n                    </c:if>\r\n\r\n                    <c:if test=\"${error == 1}\">\r\n                        <div class=\"alert alert-danger\" style=\"color: red\">Tài khoản này đang tạm khóa vui lòng liên hệ admin</div>\r\n                    </c:if>\r\n                    <div class=\"input-group mb-5 d-flex justify-content-between\">\r\n                        <div class=\"form-check\">\r\n                            <input type=\"checkbox\" class=\"form-check-input\" id=\"formCheck\" onclick=\"myFunction()\">\r\n                            <label for=\"formCheck\" class=\"form-check-label text-secondary\"><small>Hiện thị mật khẩu</small></label>\r\n                        </div>\r\n                        <div class=\"forgot\">\r\n                            <small><a href=\"forgotpassword.jsp\">Quên mật khẩu?</a></small>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"input-group mb-3\">\r\n                        <button class=\"btn btn-lg btn-primary w-100 fs-6\"><i class=\"fa fa-right-to-bracket fa-beat-fade\" style=\"color: #000000;\"></i> Đăng nhập</button>\r\n                    </div>\r\n                </form>\r\n                <div class=\"row\">\r\n                    <small>Không có tài khoản? <a href=\"register\">Đăng ký ngay</a></small>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>\r\n\r\n<script>\r\n    function myFunction() {\r\n        var x = document.getElementById(\"myInput\");\r\n        if (x.type === \"password\") {\r\n            x.type = \"text\";\r\n        } else {\r\n            x.type = \"password\";\r\n        }\r\n    }\r\n</script>\r\n<script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js\" integrity=\"sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM\" crossorigin=\"anonymous\"></script>\r\n<script src=\"https://kit.fontawesome.com/fc6bd51969.js\" crossorigin=\"anonymous\"></script>\r\n</body>\r\n</html>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/WEB-INF/views/login.jsp b/src/main/webapp/WEB-INF/views/login.jsp
--- a/src/main/webapp/WEB-INF/views/login.jsp	(revision c1fe8e69c04e00687d5ca9159c928c99ac5b0e4e)
+++ b/src/main/webapp/WEB-INF/views/login.jsp	(date 1732634546492)
@@ -110,7 +110,7 @@
                             <label for="formCheck" class="form-check-label text-secondary"><small>Hiện thị mật khẩu</small></label>
                         </div>
                         <div class="forgot">
-                            <small><a href="forgotpassword.jsp">Quên mật khẩu?</a></small>
+                            <small><a href="forgotPassword">Quên mật khẩu?</a></small>
                         </div>
                     </div>
                     <div class="input-group mb-3">
Index: src/main/java/com/example/service/UserService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.service;\r\n\r\npublic class UserService {\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/example/service/UserService.java b/src/main/java/com/example/service/UserService.java
--- a/src/main/java/com/example/service/UserService.java	(revision c1fe8e69c04e00687d5ca9159c928c99ac5b0e4e)
+++ b/src/main/java/com/example/service/UserService.java	(date 1732634546501)
@@ -1,4 +1,47 @@
 package com.example.service;
 
+import com.example.model.Account;
+import com.example.repository.AccountRepository;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.mail.SimpleMailMessage;
+import org.springframework.mail.javamail.JavaMailSender;
+import org.springframework.stereotype.Service;
+
+import java.util.Random;
+
+@Service
 public class UserService {
+    @Autowired
+    private AccountRepository accountRepository;
+
+    @Autowired
+    private JavaMailSender mailSender;
+
+    public boolean sendVerifyCodeAndUpdatePassword(String email) {
+        // Lấy thông tin người dùng dựa trên email
+        Account account = accountRepository.findByUsername(email);  // Assuming `email` is the username
+        if (account == null) {
+            return false;
+        }
+
+        String verificationCode = generateRandomCode();
+        sendCodeToEmail(email, verificationCode);
+
+        // Cập nhật password với mã xác minh
+        account.setPassword(verificationCode); // Giả sử bạn lưu mã xác minh tạm thời làm password
+        accountRepository.save(account);
+        return true;
+    }
+
+    private String generateRandomCode() {
+        return String.format("%06d", new Random().nextInt(999999));
+    }
+
+    private void sendCodeToEmail(String email, String code) {
+        SimpleMailMessage message = new SimpleMailMessage();
+        message.setTo(email);
+        message.setSubject("Your Password Reset Code");
+        message.setText("Your new password is: " + code);
+        mailSender.send(message);
+    }
 }
Index: src/main/webapp/WEB-INF/views/a.jsp
===================================================================
diff --git a/src/main/webapp/WEB-INF/views/a.jsp b/src/main/webapp/WEB-INF/views/a.jsp
deleted file mode 100644
--- a/src/main/webapp/WEB-INF/views/a.jsp	(revision c1fe8e69c04e00687d5ca9159c928c99ac5b0e4e)
+++ /dev/null	(revision c1fe8e69c04e00687d5ca9159c928c99ac5b0e4e)
@@ -1,16 +0,0 @@
-<%--
-  Created by IntelliJ IDEA.
-  User: ADMIN
-  Date: 11/26/2024
-  Time: 11:00 AM
-  To change this template use File | Settings | File Templates.
---%>
-<%@ page contentType="text/html;charset=UTF-8" language="java" %>
-<html>
-<head>
-    <title>vaddava</title>
-</head>
-<body>
-
-</body>
-</html>
Index: src/main/webapp/WEB-INF/dispatcher-servlet.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><beans xmlns=\"http://www.springframework.org/schema/beans\"\r\n       xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n       xmlns:context=\"http://www.springframework.org/schema/context\"\r\n       xmlns:mvc=\"http://www.springframework.org/schema/mvc\"\r\n       xmlns:tx=\"http://www.springframework.org/schema/tx\"\r\n       xmlns:jpa=\"http://www.springframework.org/schema/data/jpa\"\r\n       xsi:schemaLocation=\"\r\n           http://www.springframework.org/schema/beans\r\n           http://www.springframework.org/schema/beans/spring-beans.xsd\r\n           http://www.springframework.org/schema/context\r\n           http://www.springframework.org/schema/context/spring-context.xsd\r\n           http://www.springframework.org/schema/mvc\r\n           http://www.springframework.org/schema/mvc/spring-mvc.xsd\r\n           http://www.springframework.org/schema/tx\r\n           http://www.springframework.org/schema/tx/spring-tx.xsd\r\n           http://www.springframework.org/schema/data/jpa\r\n           http://www.springframework.org/schema/data/jpa/spring-jpa.xsd\">\r\n\r\n    <!-- Cấu hình để Spring có thể tự động phát hiện các repository JPA -->\r\n    <context:component-scan base-package=\"com.example\" />\r\n    <jpa:repositories base-package=\"com.example.repository\" />\r\n\r\n    <mvc:annotation-driven />\r\n    <mvc:resources mapping=\"/assets/**\" location=\"/assets/\" />\r\n    <bean class=\"org.springframework.web.servlet.view.InternalResourceViewResolver\">\r\n        <property name=\"prefix\" value=\"/WEB-INF/views/\" />\r\n        <property name=\"suffix\" value=\".jsp\" />\r\n        <property name=\"contentType\" value=\"text/html; charset=UTF-8\" />\r\n    </bean>\r\n\r\n    <!-- Cấu hình DataSource -->\r\n    <bean id=\"dataSource\" class=\"org.springframework.jdbc.datasource.DriverManagerDataSource\">\r\n        <property name=\"driverClassName\" value=\"com.microsoft.sqlserver.jdbc.SQLServerDriver\" />\r\n        <property name=\"url\" value=\"jdbc:sqlserver://localhost:1433;databaseName=TestBabyCareV2;encrypt=false;characterEncoding=UTF-8;\" />\r\n        <property name=\"username\" value=\"sa\" />\r\n        <property name=\"password\" value=\"030303\" />\r\n    </bean>\r\n\r\n    <!-- Cấu hình EntityManagerFactory -->\r\n    <bean id=\"entityManagerFactory\" class=\"org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean\">\r\n        <property name=\"dataSource\" ref=\"dataSource\" />\r\n        <property name=\"packagesToScan\" value=\"com.example.model\" />\r\n        <property name=\"jpaVendorAdapter\">\r\n            <bean class=\"org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter\">\r\n                <property name=\"database\" value=\"SQL_SERVER\" />\r\n                <property name=\"showSql\" value=\"true\" />\r\n                <property name=\"generateDdl\" value=\"false\" />\r\n            </bean>\r\n        </property>\r\n    </bean>\r\n\r\n    <!-- Cấu hình TransactionManager -->\r\n    <bean id=\"transactionManager\" class=\"org.springframework.orm.jpa.JpaTransactionManager\">\r\n        <property name=\"entityManagerFactory\" ref=\"entityManagerFactory\"/>\r\n    </bean>\r\n\r\n    <tx:annotation-driven transaction-manager=\"transactionManager\"/>\r\n\r\n    <!-- Cấu hình JavaMailSender -->\r\n    <bean id=\"mailSender\" class=\"org.springframework.mail.javamail.JavaMailSenderImpl\">\r\n        <property name=\"host\" value=\"smtp.gmail.com\" />\r\n        <property name=\"port\" value=\"587\" />\r\n        <property name=\"username\" value=\"phuongnam121103@gmail.com\" />\r\n        <property name=\"password\" value=\"eqna xeml exop mnzc\" />\r\n\r\n        <property name=\"javaMailProperties\">\r\n            <props>\r\n                <prop key=\"mail.smtp.auth\">true</prop>\r\n                <prop key=\"mail.smtp.starttls.enable\">true</prop>\r\n                <prop key=\"mail.smtp.ssl.trust\">smtp.gmail.com</prop>\r\n                <prop key=\"mail.debug\">true</prop>\r\n            </props>\r\n        </property>\r\n    </bean>\r\n\r\n\r\n</beans>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/WEB-INF/dispatcher-servlet.xml b/src/main/webapp/WEB-INF/dispatcher-servlet.xml
--- a/src/main/webapp/WEB-INF/dispatcher-servlet.xml	(revision c1fe8e69c04e00687d5ca9159c928c99ac5b0e4e)
+++ b/src/main/webapp/WEB-INF/dispatcher-servlet.xml	(date 1732634546555)
@@ -33,7 +33,7 @@
         <property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
         <property name="url" value="jdbc:sqlserver://localhost:1433;databaseName=TestBabyCareV2;encrypt=false;characterEncoding=UTF-8;" />
         <property name="username" value="sa" />
-        <property name="password" value="030303" />
+        <property name="password" value="123456" />
     </bean>
 
     <!-- Cấu hình EntityManagerFactory -->
Index: .idea/workspace.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"ArtifactsWorkspaceSettings\">\r\n    <artifacts-to-build>\r\n      <artifact name=\"Baby:war\" />\r\n    </artifacts-to-build>\r\n  </component>\r\n  <component name=\"AutoImportSettings\">\r\n    <option name=\"autoReloadType\" value=\"SELECTIVE\" />\r\n  </component>\r\n  <component name=\"ChangeListManager\">\r\n    <list default=\"true\" id=\"bdf3156d-4778-48b3-a845-d12e132aea44\" name=\"Changes\" comment=\"comit\">\r\n      <change beforePath=\"$PROJECT_DIR$/.idea/workspace.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/.idea/workspace.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/pom.xml\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/pom.xml\" afterDir=\"false\" />\r\n      <change beforePath=\"$PROJECT_DIR$/src/main/java/com/example/repository/AccountRepository.java\" beforeDir=\"false\" afterPath=\"$PROJECT_DIR$/src/main/java/com/example/repository/AccountRepository.java\" afterDir=\"false\" />\r\n    </list>\r\n    <option name=\"SHOW_DIALOG\" value=\"false\" />\r\n    <option name=\"HIGHLIGHT_CONFLICTS\" value=\"true\" />\r\n    <option name=\"HIGHLIGHT_NON_ACTIVE_CHANGELIST\" value=\"false\" />\r\n    <option name=\"LAST_RESOLUTION\" value=\"IGNORE\" />\r\n  </component>\r\n  <component name=\"Git.Settings\">\r\n    <option name=\"RECENT_GIT_ROOT_PATH\" value=\"$PROJECT_DIR$\" />\r\n  </component>\r\n  <component name=\"LogFilters\">\r\n    <option name=\"FILTER_ERRORS\" value=\"false\" />\r\n    <option name=\"FILTER_WARNINGS\" value=\"false\" />\r\n    <option name=\"FILTER_INFO\" value=\"true\" />\r\n    <option name=\"FILTER_DEBUG\" value=\"true\" />\r\n    <option name=\"CUSTOM_FILTER\" />\r\n  </component>\r\n  <component name=\"MarkdownSettingsMigration\">\r\n    <option name=\"stateVersion\" value=\"1\" />\r\n  </component>\r\n  <component name=\"ProjectId\" id=\"2pN0Rg4HzsWEDTmidWlbyEoz1SR\" />\r\n  <component name=\"ProjectLevelVcsManager\" settingsEditedManually=\"true\">\r\n    <ConfirmationsSetting value=\"2\" id=\"Add\" />\r\n  </component>\r\n  <component name=\"ProjectViewState\">\r\n    <option name=\"hideEmptyMiddlePackages\" value=\"true\" />\r\n    <option name=\"showLibraryContents\" value=\"true\" />\r\n  </component>\r\n  <component name=\"PropertiesComponent\"><![CDATA[{\r\n  \"keyToString\": {\r\n    \"RunOnceActivity.OpenProjectViewOnStart\": \"true\",\r\n    \"RunOnceActivity.ShowReadmeOnStart\": \"true\",\r\n    \"WebServerToolWindowFactoryState\": \"false\",\r\n    \"last_opened_file_path\": \"D:/TestSpring/BabyCareSpringMVC2024/Baby/src/main/java/com/example\"\r\n  }\r\n}]]></component>\r\n  <component name=\"RecentsManager\">\r\n    <key name=\"CopyFile.RECENT_KEYS\">\r\n      <recent name=\"D:\\TestSpring\\BabyCareSpringMVC2024\\Baby\\src\\main\\java\\com\\example\" />\r\n      <recent name=\"D:\\TestSpring\\BabyCareSpringMVC2024\\Baby\\src\\main\\webapp\\WEB-INF\" />\r\n    </key>\r\n    <key name=\"CopyClassDialog.RECENTS_KEY\">\r\n      <recent name=\"com.example.model\" />\r\n    </key>\r\n  </component>\r\n  <component name=\"RunManager\">\r\n    <configuration name=\"Tomcat VIP\" type=\"#com.intellij.j2ee.web.tomcat.TomcatRunConfigurationFactory\" factoryName=\"Local\" APPLICATION_SERVER_NAME=\"Tomcat VIP\" ALTERNATIVE_JRE_ENABLED=\"false\" nameIsGenerated=\"true\">\r\n      <option name=\"UPDATING_POLICY\" value=\"restart-server\" />\r\n      <deployment>\r\n        <artifact name=\"Baby:war\">\r\n          <settings>\r\n            <option name=\"CONTEXT_PATH\" value=\"/Baby_war\" />\r\n          </settings>\r\n        </artifact>\r\n      </deployment>\r\n      <server-settings>\r\n        <option name=\"BASE_DIRECTORY_NAME\" value=\"2f15c67e-d4bf-4db7-b782-fe6725a5909d\" />\r\n      </server-settings>\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat\" />\r\n      <predefined_log_file enabled=\"true\" id=\"Tomcat Catalina\" />\r\n      <predefined_log_file id=\"Tomcat Manager\" />\r\n      <predefined_log_file id=\"Tomcat Host Manager\" />\r\n      <predefined_log_file id=\"Tomcat Localhost Access\" />\r\n      <RunnerSettings RunnerId=\"Debug\">\r\n        <option name=\"DEBUG_PORT\" value=\"50530\" />\r\n      </RunnerSettings>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Cover\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Debug\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Profile\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <ConfigurationWrapper VM_VAR=\"JAVA_OPTS\" RunnerId=\"Run\">\r\n        <option name=\"USE_ENV_VARIABLES\" value=\"true\" />\r\n        <STARTUP>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </STARTUP>\r\n        <SHUTDOWN>\r\n          <option name=\"USE_DEFAULT\" value=\"true\" />\r\n          <option name=\"SCRIPT\" value=\"\" />\r\n          <option name=\"VM_PARAMETERS\" value=\"\" />\r\n          <option name=\"PROGRAM_PARAMETERS\" value=\"\" />\r\n        </SHUTDOWN>\r\n      </ConfigurationWrapper>\r\n      <method v=\"2\">\r\n        <option name=\"Make\" enabled=\"true\" />\r\n        <option name=\"BuildArtifacts\" enabled=\"true\">\r\n          <artifact name=\"Baby:war\" />\r\n        </option>\r\n      </method>\r\n    </configuration>\r\n  </component>\r\n  <component name=\"SpellCheckerSettings\" RuntimeDictionaries=\"0\" Folders=\"0\" CustomDictionaries=\"0\" DefaultDictionary=\"application-level\" UseSingleDictionary=\"true\" transferred=\"true\" />\r\n  <component name=\"TaskManager\">\r\n    <task active=\"true\" id=\"Default\" summary=\"Default task\">\r\n      <changelist id=\"bdf3156d-4778-48b3-a845-d12e132aea44\" name=\"Changes\" comment=\"\" />\r\n      <created>1732591220191</created>\r\n      <option name=\"number\" value=\"Default\" />\r\n      <option name=\"presentableId\" value=\"Default\" />\r\n      <updated>1732591220191</updated>\r\n      <workItem from=\"1732591221636\" duration=\"2430000\" />\r\n    </task>\r\n    <task id=\"LOCAL-00001\" summary=\"comit\">\r\n      <created>1732594750957</created>\r\n      <option name=\"number\" value=\"00001\" />\r\n      <option name=\"presentableId\" value=\"LOCAL-00001\" />\r\n      <option name=\"project\" value=\"LOCAL\" />\r\n      <updated>1732594750957</updated>\r\n    </task>\r\n    <option name=\"localTasksCounter\" value=\"2\" />\r\n    <servers />\r\n  </component>\r\n  <component name=\"TypeScriptGeneratedFilesManager\">\r\n    <option name=\"version\" value=\"3\" />\r\n  </component>\r\n  <component name=\"Vcs.Log.Tabs.Properties\">\r\n    <option name=\"TAB_STATES\">\r\n      <map>\r\n        <entry key=\"MAIN\">\r\n          <value>\r\n            <State />\r\n          </value>\r\n        </entry>\r\n      </map>\r\n    </option>\r\n  </component>\r\n  <component name=\"VcsManagerConfiguration\">\r\n    <MESSAGE value=\"comit\" />\r\n    <option name=\"LAST_COMMIT_MESSAGE\" value=\"comit\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/workspace.xml b/.idea/workspace.xml
--- a/.idea/workspace.xml	(revision c1fe8e69c04e00687d5ca9159c928c99ac5b0e4e)
+++ b/.idea/workspace.xml	(date 1732634878661)
@@ -2,23 +2,35 @@
 <project version="4">
   <component name="ArtifactsWorkspaceSettings">
     <artifacts-to-build>
-      <artifact name="Baby:war" />
+      <artifact name="BabyCareSpringMVC2024:war" />
     </artifacts-to-build>
   </component>
   <component name="AutoImportSettings">
     <option name="autoReloadType" value="SELECTIVE" />
   </component>
   <component name="ChangeListManager">
-    <list default="true" id="bdf3156d-4778-48b3-a845-d12e132aea44" name="Changes" comment="comit">
+    <list default="true" id="bdf3156d-4778-48b3-a845-d12e132aea44" name="Changes" comment="">
+      <change afterPath="$PROJECT_DIR$/.idea/webContexts.xml" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/main/java/com/example/controller/ForgotPasswordController.java" afterDir="false" />
+      <change afterPath="$PROJECT_DIR$/src/main/webapp/WEB-INF/views/forgotPassword.jsp" afterDir="false" />
       <change beforePath="$PROJECT_DIR$/.idea/workspace.xml" beforeDir="false" afterPath="$PROJECT_DIR$/.idea/workspace.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/pom.xml" beforeDir="false" afterPath="$PROJECT_DIR$/pom.xml" afterDir="false" />
-      <change beforePath="$PROJECT_DIR$/src/main/java/com/example/repository/AccountRepository.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/com/example/repository/AccountRepository.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/java/com/example/service/UserService.java" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/java/com/example/service/UserService.java" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/WEB-INF/dispatcher-servlet.xml" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/WEB-INF/dispatcher-servlet.xml" afterDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/WEB-INF/views/a.jsp" beforeDir="false" />
+      <change beforePath="$PROJECT_DIR$/src/main/webapp/WEB-INF/views/login.jsp" beforeDir="false" afterPath="$PROJECT_DIR$/src/main/webapp/WEB-INF/views/login.jsp" afterDir="false" />
     </list>
     <option name="SHOW_DIALOG" value="false" />
     <option name="HIGHLIGHT_CONFLICTS" value="true" />
     <option name="HIGHLIGHT_NON_ACTIVE_CHANGELIST" value="false" />
     <option name="LAST_RESOLUTION" value="IGNORE" />
   </component>
+  <component name="FileTemplateManagerImpl">
+    <option name="RECENT_TEMPLATES">
+      <list>
+        <option value="Class" />
+      </list>
+    </option>
+  </component>
   <component name="Git.Settings">
     <option name="RECENT_GIT_ROOT_PATH" value="$PROJECT_DIR$" />
   </component>
@@ -34,20 +46,22 @@
   </component>
   <component name="ProjectId" id="2pN0Rg4HzsWEDTmidWlbyEoz1SR" />
   <component name="ProjectLevelVcsManager" settingsEditedManually="true">
+    <OptionsSetting value="false" id="Update" />
     <ConfirmationsSetting value="2" id="Add" />
   </component>
   <component name="ProjectViewState">
     <option name="hideEmptyMiddlePackages" value="true" />
     <option name="showLibraryContents" value="true" />
   </component>
-  <component name="PropertiesComponent"><![CDATA[{
-  "keyToString": {
-    "RunOnceActivity.OpenProjectViewOnStart": "true",
-    "RunOnceActivity.ShowReadmeOnStart": "true",
-    "WebServerToolWindowFactoryState": "false",
-    "last_opened_file_path": "D:/TestSpring/BabyCareSpringMVC2024/Baby/src/main/java/com/example"
+  <component name="PropertiesComponent">{
+  &quot;keyToString&quot;: {
+    &quot;RunOnceActivity.OpenProjectViewOnStart&quot;: &quot;true&quot;,
+    &quot;RunOnceActivity.ShowReadmeOnStart&quot;: &quot;true&quot;,
+    &quot;WebServerToolWindowFactoryState&quot;: &quot;false&quot;,
+    &quot;last_opened_file_path&quot;: &quot;D:/TestSpring/BabyCareSpringMVC2024/Baby/src/main/java/com/example&quot;,
+    &quot;spring.configuration.checksum&quot;: &quot;38fbd63d295ed61500256bc8e793f0e2&quot;
   }
-}]]></component>
+}</component>
   <component name="RecentsManager">
     <key name="CopyFile.RECENT_KEYS">
       <recent name="D:\TestSpring\BabyCareSpringMVC2024\Baby\src\main\java\com\example" />
@@ -58,17 +72,18 @@
     </key>
   </component>
   <component name="RunManager">
-    <configuration name="Tomcat VIP" type="#com.intellij.j2ee.web.tomcat.TomcatRunConfigurationFactory" factoryName="Local" APPLICATION_SERVER_NAME="Tomcat VIP" ALTERNATIVE_JRE_ENABLED="false" nameIsGenerated="true">
+    <configuration name="Tomcat 8.5.97" type="#com.intellij.j2ee.web.tomcat.TomcatRunConfigurationFactory" factoryName="Local" APPLICATION_SERVER_NAME="Tomcat 8.5.97" ALTERNATIVE_JRE_ENABLED="false" nameIsGenerated="true">
+      <option name="BROWSER_ID" value="98ca6316-2f89-46d9-a9e5-fa9e2b0625b3" />
       <option name="UPDATING_POLICY" value="restart-server" />
       <deployment>
-        <artifact name="Baby:war">
+        <artifact name="BabyCareSpringMVC2024:war">
           <settings>
-            <option name="CONTEXT_PATH" value="/Baby_war" />
+            <option name="CONTEXT_PATH" value="/BabyCareSpringMVC2024_war" />
           </settings>
         </artifact>
       </deployment>
       <server-settings>
-        <option name="BASE_DIRECTORY_NAME" value="2f15c67e-d4bf-4db7-b782-fe6725a5909d" />
+        <option name="BASE_DIRECTORY_NAME" value="f3f87d5e-0482-496a-8118-a148dfe3f1eb" />
       </server-settings>
       <predefined_log_file enabled="true" id="Tomcat" />
       <predefined_log_file enabled="true" id="Tomcat Catalina" />
@@ -76,7 +91,7 @@
       <predefined_log_file id="Tomcat Host Manager" />
       <predefined_log_file id="Tomcat Localhost Access" />
       <RunnerSettings RunnerId="Debug">
-        <option name="DEBUG_PORT" value="50530" />
+        <option name="DEBUG_PORT" value="60021" />
       </RunnerSettings>
       <ConfigurationWrapper VM_VAR="JAVA_OPTS" RunnerId="Cover">
         <option name="USE_ENV_VARIABLES" value="true" />
@@ -141,7 +156,7 @@
       <method v="2">
         <option name="Make" enabled="true" />
         <option name="BuildArtifacts" enabled="true">
-          <artifact name="Baby:war" />
+          <artifact name="BabyCareSpringMVC2024:war" />
         </option>
       </method>
     </configuration>
@@ -154,16 +169,9 @@
       <option name="number" value="Default" />
       <option name="presentableId" value="Default" />
       <updated>1732591220191</updated>
-      <workItem from="1732591221636" duration="2430000" />
+      <workItem from="1732591221636" duration="1585000" />
+      <workItem from="1732630703266" duration="4154000" />
     </task>
-    <task id="LOCAL-00001" summary="comit">
-      <created>1732594750957</created>
-      <option name="number" value="00001" />
-      <option name="presentableId" value="LOCAL-00001" />
-      <option name="project" value="LOCAL" />
-      <updated>1732594750957</updated>
-    </task>
-    <option name="localTasksCounter" value="2" />
     <servers />
   </component>
   <component name="TypeScriptGeneratedFilesManager">
@@ -180,8 +188,4 @@
       </map>
     </option>
   </component>
-  <component name="VcsManagerConfiguration">
-    <MESSAGE value="comit" />
-    <option name="LAST_COMMIT_MESSAGE" value="comit" />
-  </component>
 </project>
\ No newline at end of file
Index: src/main/java/com/example/controller/ForgotPasswordController.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/java/com/example/controller/ForgotPasswordController.java b/src/main/java/com/example/controller/ForgotPasswordController.java
new file mode 100644
--- /dev/null	(date 1732634546542)
+++ b/src/main/java/com/example/controller/ForgotPasswordController.java	(date 1732634546542)
@@ -0,0 +1,56 @@
+package com.example.controller;
+
+import com.example.model.Account;
+import com.example.repository.AccountRepository;
+import com.example.repository.CartRepository;
+import com.example.repository.UserRepository;
+import com.example.service.AccountService;
+import com.example.service.UserService;
+import org.springframework.beans.factory.annotation.Autowired;
+import org.springframework.stereotype.Controller;
+import org.springframework.ui.Model;
+import org.springframework.web.bind.annotation.GetMapping;
+import org.springframework.web.bind.annotation.PostMapping;
+import org.springframework.web.bind.annotation.RequestParam;
+
+import javax.servlet.http.HttpSession;
+
+@Controller
+public class ForgotPasswordController {
+    @Autowired
+    private AccountRepository accountRepository;
+
+    @Autowired
+    private UserRepository userRepository;
+
+    @Autowired
+    private UserService userService;
+
+
+    @GetMapping("/forgotPassword")
+    public String showForm() {
+        return "forgotPassword"; // Tên của trang JSP
+    }
+
+
+    @PostMapping("/forgotPassword")
+    public String ForgotPassword(String email, Model model) {
+        // Kiểm tra xem email có tồn tại không
+        boolean exists = accountRepository.existsByEmail(email);
+        if (!exists) {
+            model.addAttribute("thongbao", "Email không tồn tại");
+            return "forgotPassword";
+        }
+
+        // Nếu email tồn tại, gửi mã xác minh và cập nhật password
+        boolean success = userService.sendVerifyCodeAndUpdatePassword(email);
+        if (success) {
+            model.addAttribute("thongbao", "Password mới của bạn đã được hệ thống gửi về email");
+            return "login";
+        } else {
+            model.addAttribute("thongbao", "Có lỗi xảy ra. Vui lòng thử lại.");
+            return "forgotPassword";
+        }
+    }
+
+}
Index: .idea/webContexts.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/webContexts.xml b/.idea/webContexts.xml
new file mode 100644
--- /dev/null	(date 1732634546562)
+++ b/.idea/webContexts.xml	(date 1732634546562)
@@ -0,0 +1,10 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="WebContextManager">
+    <option name="state">
+      <map>
+        <entry key="file://$PROJECT_DIR$/src/main/webapp/WEB-INF/views/register.jsp" value="file://$PROJECT_DIR$/src/main/webapp/WEB-INF/views" />
+      </map>
+    </option>
+  </component>
+</project>
\ No newline at end of file
Index: src/main/webapp/WEB-INF/views/forgotPassword.jsp
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/src/main/webapp/WEB-INF/views/forgotPassword.jsp b/src/main/webapp/WEB-INF/views/forgotPassword.jsp
new file mode 100644
--- /dev/null	(date 1732634546528)
+++ b/src/main/webapp/WEB-INF/views/forgotPassword.jsp	(date 1732634546528)
@@ -0,0 +1,146 @@
+<%@page contentType="text/html" pageEncoding="UTF-8"%>
+
+<!doctype html>
+<html lang="en">
+<head>
+    <meta charset="UTF-8">
+    <meta name="viewport" content="width=device-width, initial-scale=1.0">
+    <meta http-equiv="X-UA-Compatible" content="ie=edge">
+    <title>Quên mật khẩu</title>
+    <style>
+        body {
+            font-family: 'Nunito', sans-serif;
+            font-size: 16px;
+            color: #384047;
+            background-color: #f8f9fa;
+            margin: 0;
+            padding: 0;
+        }
+
+        .container-fluid {
+            padding: 20px;
+            background-color: #fff;
+            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
+        }
+
+        .logo img {
+            max-height: 60px;
+        }
+
+        .navbar-brand {
+            font-size: 36px;
+            font-weight: bold;
+        }
+
+        .text-primary {
+            color: #ff4880;
+        }
+
+        .text-secondary {
+            color: #4d65f9;
+        }
+
+        h1 {
+            text-align: center;
+            font-size: 32px;
+            margin: 20px 0;
+            color: #333;
+        }
+
+        h3 {
+            text-align: center;
+            font-size: 20px;
+            color: #C23628;
+            margin-bottom: 20px;
+        }
+
+        form {
+            background: #fff;
+            padding: 20px;
+            max-width: 400px;
+            margin: 0 auto;
+            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
+            border-radius: 8px;
+        }
+
+        .form-group {
+            margin-bottom: 20px;
+        }
+
+        label {
+            display: block;
+            margin-bottom: 8px;
+            font-weight: bold;
+            color: #555;
+        }
+
+        input[type="email"] {
+            width: 100%;
+            padding: 10px;
+            border: 1px solid #ccc;
+            border-radius: 4px;
+            font-size: 16px;
+            color: #333;
+        }
+
+        button {
+            display: block;
+            width: 100%;
+            padding: 12px;
+            font-size: 18px;
+            color: #fff;
+            background-color: #28a745;
+            border: none;
+            border-radius: 4px;
+            cursor: pointer;
+        }
+
+        button:hover {
+            background-color: #218838;
+        }
+
+        .modal-content {
+            border: none;
+            border-radius: 8px;
+            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
+        }
+
+        .modal-body {
+            padding: 20px;
+        }
+    </style>
+</head>
+<body>
+<div class="container-fluid">
+    <div class="row">
+        <div class="logo col-md-4">
+            <img class="img-fluid" src="/images/logo.png" alt="Logo">
+            <h1 class="navbar-brand text-primary">
+                Baby<span class="text-secondary">Care</span>
+            </h1>
+        </div>
+    </div>
+</div>
+
+<h1>Quên mật khẩu</h1>
+
+<div class="modal-dialog">
+    <div class="modal-content">
+        <div class="modal-body">
+            <form action="forgotPassword" method="post">
+                <div class="form-group">
+                    <label for="email">Email:</label>
+                    <input type="email" class="form-control" id="email" name="email" placeholder="Nhập email của bạn" required>
+                </div>
+                <!-- Hiển thị thông báo nếu có -->
+                <h3>${message}</h3>
+                <button type="submit">Gửi</button>
+            </form>
+        </div>
+    </div>
+</div>
+
+<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
+<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
+</body>
+</html>
